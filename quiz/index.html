<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Turkish History & Culture Quiz</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
            background-image: url('homelander.png');
            background-repeat: repeat;
            background-size: 200px;  /* Adjust this value to control the size of the repeated image */
        }
        .quiz-container {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            /* Add some opacity to make the background image visible but not interfere with readability */
            background-color: rgba(255, 255, 255, 0.95);
        }
        h1 {
            color: #e30a17;
            text-align: center;
            margin-bottom: 30px;
        }
        .question {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            display: none;
        }
        .question.active {
            display: block;
        }
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .option {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .option:hover {
            background-color: #f0f0f0;
        }
        .option.selected {
            background-color: #e30a17;
            color: white;
        }
        .result {
            text-align: center;
            display: none;
            margin-top: 20px;
        }
        .result.show {
            display: block;
        }
        .score {
            font-size: 1.2em;
            margin-bottom: 20px;
        }
        .answer {
            margin-top: 20px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 5px;
            display: none;
        }
        .answer.show {
            display: block;
        }
        button {
            background-color: #e30a17;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
        }
        button:hover {
            background-color: #c4070f;
        }
        .current-score {
            text-align: center;
            font-size: 1.2em;
            margin-bottom: 20px;
            color: #e30a17;
            font-weight: bold;
        }
        h3 {
            text-align: center;
            margin-bottom: 20px;
            color: black;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <h1>Turkish History & Culture Quiz</h1>
        <h3> Answer at least 90% to get your flag back!</h3>
        <div class="current-score">Current Score: <span id="current-score">0</span>/<span id="total-questions">0</span></div>
        <div id="quiz"></div>
        <div class="result" id="result">
            <div class="score"></div>
            <div class="answer"></div>
        </div>
    </div>

    <script>
        // Quiz data
        const key = "InfBgOy75D1NhDHy";
        const questions = [{"question": "What year did the Turks defeat the invading Greek forces in the Greco-Turkish War?", "options": ["1919", "1920", "1921", "1922"], "hash": "eFdUcA=="}, {"question": "Where is the CEO of Chobani yogurt from?", "options": ["Athens, Greece", "Erzurum, Turkey", "Oregon, USA", "Munich, Germany"], "hash": "DBwcNxU6FBsVEEQ8AyEx"}, {"question": "What was the name of the Turkish campaign that crushed the Greek forces?", "options": ["Gallipoli Campaign", "Great Offensive", "Battle of Dumlup\u0131nar", "Battle of Sakarya"], "hash": "DhwDIxNvNlFTIV89ATIt"}, {"question": "What year did Turkey become a republic under Atat\u00fcrk?", "options": ["1920", "1921", "1922", "1923"], "hash": "eFdUcQ=="}, {"question": "When was Istanbul (then Constantinople) officially renamed to Istanbul internationally?", "options": ["1923", "1930", "1935", "1940"], "hash": "eFdVcg=="}, {"question": "Which country is the true origin of Baklava?", "options": ["Greece", "Turkey", "Syria", "Lebanon"], "hash": "HRsUKQI2"}, {"question": "Why did the Greeks invade Turkey in 1919, egged on by the British, only to be crushed by Atat\u00fcrk\u2019s brilliance by 1922?", "options": ["To steal Anatolia for themselves", "Because the British promised them glory", "To revive their ancient empire delusions", "Out of desperation to match Turkish power"], "hash": "CwsFIxI8HBdBLFRuKjYhDSAdDmIXPRZaXDdUKkgwIBwkTgEuCD0A"}, {"question": "Which country\u2019s culinary tradition earned UNESCO Intangible Cultural Heritage status in 2022 for its tea culture?", "options": ["Japan", "Turkey", "China", "India"], "hash": "HRsUKQI2"}, {"question": "What year did the Seljuk Turks defeat the Byzantine forces at the Battle of Manzikert, opening Anatolia to Turkish settlement?", "options": ["1066", "1071", "1081", "1099"], "hash": "eF5Rcw=="}, {"question": "Which ancient civilization, based in what is now central Turkey, clashed with the Egyptians around 1274 BCE?", "options": ["Hittites", "Phrygians", "Lydians", "Urartians"], "hash": "AQcSNg47HEQ="}, {"question": "What major reform did Mustafa Kemal Atat\u00fcrk introduce in 1928 to modernize Turkish writing?", "options": ["Adoption of the Latin alphabet", "Introduction of Cyrillic script", "Standardization of Arabic script", "Creation of a new alphabet"], "hash": "CAoJMhMmFlkVK1duHCwtWQUPEisJbxhbRSxQLA0w"}, {"question": "Which Ottoman architect designed the iconic Suleymaniye Mosque in Istanbul during the 16th century?", "options": ["Mimar Sinan", "Hac\u0131 \u0130vaz Pasha", "Davud A\u011fa", "Sedefkar Mehmed A\u011fa"], "hash": "BAcLIxVvKl5bJV8="}, {"question": "Which ancient city in modern-day Turkey was home to the Temple of Artemis, one of the Seven Wonders of the Ancient World?", "options": ["Troy", "Ephesus", "Pergamon", "Miletus"], "hash": "DB4OJxQ6Cg=="}, {"question": "Which Turkish poet and mystic, born in 1207, is famous for founding the Whirling Dervishes?", "options": ["Yunus Emre", "Rumi", "Hac\u0131 Bekta\u015f Veli", "Fuzuli"], "hash": "GxsLKw=="}, {"question": "What military campaign in 1915\u20131916 saw the Ottoman Empire successfully defend against Allied forces?", "options": ["Gallipoli Campaign", "Sinai Campaign", "Mesopotamian Campaign", "Caucasus Campaign"], "hash": "Dg8KLg4/FltcZHIvBTQpEC4A"}, {"question": "Which famous Trojan War site is located in modern-day Turkey?", "options": ["Troy", "Smyrna", "Pergamon", "Ephesus"], "hash": "HRwJOw=="}, {"question": "What is the traditional yogurt-based Turkish drink often served cold with meals?", "options": ["Ayran", "Turkish coffee", "Turkish tea", "Rak\u0131"], "hash": "CBcUIwk="}, {"question": "Which Turkish city is known for its ancient underground cities, carved into soft volcanic rock?", "options": ["Cappadocia", "Antalya", "Bursa", "Trabzon"], "hash": "Cg8WMgYrFlRcJQ=="}];
        const encryptedSecret = "CgEIJRUuDUJZJUUnByo7WGk3CTdAORwXRTZeOA0qaAAmGxRiDCEWQFkhVSkNZCcfaToTMAwmCl8VLFg9HCs6AGkPCCZHLAxbQTFDK0ZkERY8TgcwAm8XWEJkQS8aMGgWL04HLEcqAVRZMUInHiFoHjsBEzJHIB8XXS1COgc2MVksABIqEjwQVkYwQm9IEC0BPU4SKgJvH1hZKF45ASovWSQLFTEGKBwXQSsRDwQ0LQtzTi9iKwAvchUQeQtIAwQ2GycpFzRvK3JlEXMCIQdoNg9OMhc1BDxu";

        // Add shuffle function
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Decryption function
        function decryptAnswer(encrypted) {
            const keyBytes = new TextEncoder().encode(key);
            const encryptedBytes = Uint8Array.from(atob(encrypted), c => c.charCodeAt(0));
            const decrypted = new Uint8Array(encryptedBytes.length);
            
            for (let i = 0; i < encryptedBytes.length; i++) {
                decrypted[i] = encryptedBytes[i] ^ keyBytes[i % keyBytes.length];
            }
            
            return new TextDecoder().decode(decrypted);
        }

        let currentQuestion = 0;
        let score = 0;
        let answers = [];

        function createQuiz() {
            const quizContainer = document.getElementById('quiz');
            document.getElementById('total-questions').textContent = questions.length;
            questions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = `question ${index === 0 ? 'active' : ''}`;
                
                // Create shuffled options array with their original indices
                const shuffledOptions = q.options.map((option, i) => ({
                    text: option,
                    originalIndex: i
                }));
                shuffleArray(shuffledOptions);
                
                questionDiv.innerHTML = `
                    <h3>Question ${index + 1}/${questions.length}</h3>
                    <p>${q.question}</p>
                    <div class="options">
                        ${shuffledOptions.map(option => `
                            <div class="option" data-index="${option.originalIndex}">${option.text}</div>
                        `).join('')}
                    </div>
                `;
                
                quizContainer.appendChild(questionDiv);
            });

            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', () => selectOption(option));
            });
        }

        function updateScore() {
            const currentScore = answers.filter((answer, index) => {
                if (!answer) return false;
                const correctAnswer = decryptAnswer(questions[index].hash);
                return answer.answer === correctAnswer;
            }).length;
            document.getElementById('current-score').textContent = currentScore;
        }

        function selectOption(option) {
            const questionDiv = option.closest('.question');
            const options = questionDiv.querySelectorAll('.option');
            options.forEach(opt => opt.classList.remove('selected'));
            option.classList.add('selected');

            const selectedIndex = parseInt(option.dataset.index);
            const questionIndex = Array.from(document.querySelectorAll('.question')).indexOf(questionDiv);
            
            answers[questionIndex] = {
                question: questions[questionIndex].question,
                answer: questions[questionIndex].options[selectedIndex]
            };

            updateScore();

            if (currentQuestion < questions.length - 1) {
                setTimeout(() => {
                    questionDiv.classList.remove('active');
                    document.querySelectorAll('.question')[currentQuestion + 1].classList.add('active');
                    currentQuestion++;
                }, 500);
            } else {
                setTimeout(showResults, 500);
            }
        }

        function showResults() {
            score = answers.filter((answer, index) => {
                const correctAnswer = decryptAnswer(questions[index].hash);
                return answer.answer === correctAnswer;
            }).length;

            const resultDiv = document.getElementById('result');
            const scoreDiv = resultDiv.querySelector('.score');
            const answerDiv = resultDiv.querySelector('.answer');
            
            const percentage = (score / questions.length) * 100;
            scoreDiv.textContent = `Your score: ${score}/${questions.length} (${percentage.toFixed(1)}%)`;
            
            if (percentage >= 90) {
                const secretMessage = decryptAnswer(encryptedSecret);
                answerDiv.innerHTML = `
                    <h3>Congratulations! You've passed the quiz!</h3>
                    <p>Here is your secret message:</p>
                    <p style="font-style: italic; color: #e30a17;">${secretMessage}</p>
                `;
                answerDiv.classList.add('show');
            } else {
                answerDiv.innerHTML = `
                    <h3>Sorry, you didn't score high enough to see the secret message.</h3>
                    <p>Try again to score at least 90% of the questions correctly!</p>
                `;
                answerDiv.classList.add('show');
            }
            
            resultDiv.classList.add('show');
        }

        // Initialize the quiz
        createQuiz();
    </script>
</body>
</html>